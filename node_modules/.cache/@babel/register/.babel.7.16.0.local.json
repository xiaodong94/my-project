{
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/dongshx/Documents/study/my-project/server/libs/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/dongshx/Documents/study/my-project\",\"filename\":\"/Users/dongshx/Documents/study/my-project/server/libs/zookeeper.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/Users/dongshx/Documents/study/my-project\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.16.0:local": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/dongshx/Documents/study/my-project/server/libs/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/dongshx/Documents/study/my-project",
      "filename": "/Users/dongshx/Documents/study/my-project/server/libs/zookeeper.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "local",
      "root": "/Users/dongshx/Documents/study/my-project",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/dongshx/Documents/study/my-project/server/libs/zookeeper.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/dongshx/Documents/study/my-project/server/libs/zookeeper.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/dongshx/Documents/study/my-project/server/libs/",
        "sourceFileName": "zookeeper.js"
      }
    },
    "ast": null,
    "code": "const ZooKeeper = require('zookeeper');\n\nconst zk = require('../config/zk');\n\nconst {\n  getRandomSubscript\n} = require('../libs/random');\n\nconst {\n  setCache,\n  getCache\n} = require('../libs/cache-store');\n\nconst {\n  isPro,\n  isLocalPro,\n  release,\n  test,\n  useZookeeper\n} = require('../config/env');\n\nfunction getZkConfig() {\n  let zk = test;\n\n  if (isPro) {\n    zk = release;\n  } else if (isLocalPro) {\n    zk = release;\n  }\n\n  const key = getRandomSubscript(zk.length);\n  console.log('key', key);\n  const result = zk[key];\n  console.log('result', result);\n  return result;\n}\n/**\n * @param timeoutMs {number}\n * @returns {ZooKeeper}\n */\n\n\nfunction createClient(timeoutMs = 5000) {\n  const config = {\n    connect: getZkConfig(),\n    timeout: timeoutMs,\n    debug_level: ZooKeeper.ZOO_LOG_LEVEL_WARN,\n    host_order_deterministic: false\n  };\n  let client = new ZooKeeper(config);\n  client.on('close', () => {\n    console.log('close', `session closed, id=${client.client_id}`);\n    client = null;\n  });\n  client.on('connecting', () => {\n    console.log('connecting', `session connecting, id=${client.client_id}`);\n  });\n  client.on('connect', () => {\n    console.log('connect', `session connect, id=${client.client_id}`);\n  });\n  client.init(config);\n  return client;\n}\n\nasync function handleZookeeper() {\n  console.log('use');\n\n  if (!useZookeeper) {\n    return;\n  }\n\n  const client = createClient();\n  client.on('connect', async () => {\n    const [mysql, redis, server] = await Promise.all([await getMySQL(client), await getRedis(client), await getServer(client)]);\n    setCache('mysql', mysql);\n    setCache('redis', redis);\n    setCache('server', server);\n    client.close();\n  });\n}\n\nasync function getMySQL(client) {\n  const result = {};\n\n  for (const key in zk.mysql) {\n    const path = zk.mysql[key];\n    console.log('path', path);\n    const mysql = {\n      master: [],\n      slave: [],\n      username: '',\n      password: '',\n      database: ''\n    };\n    const res = await client.get_children(path, false);\n    const back = [];\n    res.forEach(val => {\n      switch (val) {\n        case 'master':\n          back[0] = 'master';\n          break;\n\n        case 'slave':\n          back[1] = 'slave';\n          break;\n\n        case 'username':\n          back[2] = 'username';\n          break;\n\n        case 'password':\n          back[3] = 'password';\n          break;\n\n        case 'database':\n          back[4] = 'database';\n          break;\n      }\n    });\n    const [master, slave, username, password, database] = await Promise.all([await client.get_children(path + '/' + back[0], false), await client.get_children(path + '/' + back[1], false), await client.get(path + '/' + back[2], false).then(data => {\n      return data[1].toString();\n    }), await client.get(path + '/' + back[3], false).then(data => {\n      return data[1].toString();\n    }), await client.get(path + '/' + back[4], false).then(data => {\n      return data[1].toString();\n    })]);\n    mysql.master = master;\n    mysql.slave = slave;\n    mysql.username = username;\n    mysql.password = password;\n    mysql.database = database;\n    console.log('Children of %s are: %j.', path, mysql);\n    result[key] = mysql;\n  }\n\n  return result;\n}\n\nasync function getRedis(client) {\n  const result = {};\n\n  for (const key in zk.redis) {\n    const path = zk.redis[key];\n    const redis = {\n      master: [],\n      password: '',\n      db: 0\n    };\n    const res = await client.get_children(path, false);\n    redis.master = res;\n    console.log('Children of %s are: %j.', path, res);\n    result[key] = redis;\n  }\n\n  return result;\n}\n\nasync function getServer(client) {\n  const result = {};\n\n  for (const key in zk.server) {\n    const path = zk.server[key];\n    const master = await client.get_children(path, false);\n    console.log('Children of %s are: %j.', path, master);\n    result[key] = master;\n  }\n\n  return result;\n}\n\nasync function awaitZookeeper() {\n  return await new Promise(resolve => {\n    if (!useZookeeper) {\n      resolve(false);\n      return;\n    }\n\n    console.log('Server use zookeeper ...');\n    const mysql = getCache('mysql');\n    const redis = getCache('redis');\n    const server = getCache('server');\n    console.log('mysql', mysql);\n\n    if (typeof mysql === 'object' && typeof redis === 'object' && typeof server === 'object') {\n      resolve(true);\n      clearInterval(timer);\n    } // const timer = setInterval(() => {\n    //   const mysql = getCache('mysql')\n    //   const redis = getCache('redis')\n    //   const server = getCache('server')\n    //   console.log('mysql',mysql)\n    //   if (typeof mysql === 'object' && typeof redis === 'object' && typeof server === 'object') {\n    //     resolve(true)\n    //     clearInterval(timer)\n    //   }\n    // }, 30)\n\n  });\n}\n\nmodule.exports = {\n  awaitZookeeper,\n  handleZookeeper\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInpvb2tlZXBlci5qcyJdLCJuYW1lcyI6WyJab29LZWVwZXIiLCJyZXF1aXJlIiwiemsiLCJnZXRSYW5kb21TdWJzY3JpcHQiLCJzZXRDYWNoZSIsImdldENhY2hlIiwiaXNQcm8iLCJpc0xvY2FsUHJvIiwicmVsZWFzZSIsInRlc3QiLCJ1c2Vab29rZWVwZXIiLCJnZXRaa0NvbmZpZyIsImtleSIsImxlbmd0aCIsImNvbnNvbGUiLCJsb2ciLCJyZXN1bHQiLCJjcmVhdGVDbGllbnQiLCJ0aW1lb3V0TXMiLCJjb25maWciLCJjb25uZWN0IiwidGltZW91dCIsImRlYnVnX2xldmVsIiwiWk9PX0xPR19MRVZFTF9XQVJOIiwiaG9zdF9vcmRlcl9kZXRlcm1pbmlzdGljIiwiY2xpZW50Iiwib24iLCJjbGllbnRfaWQiLCJpbml0IiwiaGFuZGxlWm9va2VlcGVyIiwibXlzcWwiLCJyZWRpcyIsInNlcnZlciIsIlByb21pc2UiLCJhbGwiLCJnZXRNeVNRTCIsImdldFJlZGlzIiwiZ2V0U2VydmVyIiwiY2xvc2UiLCJwYXRoIiwibWFzdGVyIiwic2xhdmUiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwiZGF0YWJhc2UiLCJyZXMiLCJnZXRfY2hpbGRyZW4iLCJiYWNrIiwiZm9yRWFjaCIsInZhbCIsImdldCIsInRoZW4iLCJkYXRhIiwidG9TdHJpbmciLCJkYiIsImF3YWl0Wm9va2VlcGVyIiwicmVzb2x2ZSIsImNsZWFySW50ZXJ2YWwiLCJ0aW1lciIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLFNBQVMsR0FBR0MsT0FBTyxDQUFDLFdBQUQsQ0FBekI7O0FBQ0EsTUFBTUMsRUFBRSxHQUFHRCxPQUFPLENBQUMsY0FBRCxDQUFsQjs7QUFDQSxNQUFNO0FBQUVFLEVBQUFBO0FBQUYsSUFBeUJGLE9BQU8sQ0FBQyxnQkFBRCxDQUF0Qzs7QUFDQSxNQUFNO0FBQUVHLEVBQUFBLFFBQUY7QUFBWUMsRUFBQUE7QUFBWixJQUF5QkosT0FBTyxD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O0FBQ0QsS0FkbUMsQ0FnQnBDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNELEdBMUJZLENBQWI7QUEyQkQ7O0FBRURDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQjtBQUFFTCxFQUFBQSxjQUFGO0FBQWtCMUIsRUFBQUE7QUFBbEIsQ0FBakIiLCJzb3VyY2VSb290IjoiL1VzZXJzL2RvbmdzaHgvRG9jdW1lbnRzL3N0dWR5L215LXByb2plY3Qvc2VydmVyL2xpYnMvIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgWm9vS2VlcGVyID0gcmVxdWlyZSgnem9va2VlcGVyJylcbmNvbnN0IHprID0gcmVxdWlyZSgnLi4vY29uZmlnL3prJylcbmNvbnN0IHsgZ2V0UmFuZG9tU3Vic2NyaXB0IH0gPSByZXF1aXJlKCcuLi9saWJzL3JhbmRvbScpXG5jb25zdCB7IHNldENhY2hlLCBnZXRDYWNoZSB9ID0gcmVxdWlyZSgnLi4vbGlicy9jYWNoZS1zdG9yZScpXG5jb25zdCB7IGlzUHJvLCBpc0xvY2FsUHJvLCByZWxlYXNlLCB0ZXN0LCB1c2Vab29rZWVwZXIgfSA9IHJlcXVpcmUoJy4uL2NvbmZpZy9lbnYnKVxuXG5mdW5jdGlvbiBnZXRaa0NvbmZpZygpIHtcbiAgbGV0IHprID0gdGVzdFxuXG4gIGlmIChpc1Bybykge1xuICAgIHprID0gcmVsZWFzZVxuICB9IGVsc2UgaWYgKGlzTG9jYWxQcm8pIHtcbiAgICB6ayA9IHJlbGVhc2VcbiAgfVxuXG4gIGNvbnN0IGtleSA9IGdldFJhbmRvbVN1YnNjcmlwdCh6ay5sZW5ndGgpXG4gIGNvbnNvbGUubG9nKCdrZXknLCBrZXkpXG4gIGNvbnN0IHJlc3VsdCA9IHprW2tleV1cbiAgY29uc29sZS5sb2coJ3Jlc3VsdCcsIHJlc3VsdClcbiAgcmV0dXJuIHJlc3VsdFxufVxuXG4vKipcbiAqIEBwYXJhbSB0aW1lb3V0TXMge251bWJlcn1cbiAqIEByZXR1cm5zIHtab29LZWVwZXJ9XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUNsaWVudCh0aW1lb3V0TXMgPSA1MDAwKSB7XG4gIGNvbnN0IGNvbmZpZyA9IHtcbiAgICBjb25uZWN0OiBnZXRaa0NvbmZpZygpLFxuICAgIHRpbWVvdXQ6IHRpbWVvdXRNcyxcbiAgICBkZWJ1Z19sZXZlbDogWm9vS2VlcGVyLlpPT19MT0dfTEVWRUxfV0FSTixcbiAgICBob3N0X29yZGVyX2RldGVybWluaXN0aWM6IGZhbHNlLFxuICB9XG5cbiAgbGV0IGNsaWVudCA9IG5ldyBab29LZWVwZXIoY29uZmlnKVxuXG4gIGNsaWVudC5vbignY2xvc2UnLCAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ2Nsb3NlJywgYHNlc3Npb24gY2xvc2VkLCBpZD0ke2NsaWVudC5jbGllbnRfaWR9YClcbiAgICBjbGllbnQgPSBudWxsXG4gIH0pXG5cbiAgY2xpZW50Lm9uKCdjb25uZWN0aW5nJywgKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdjb25uZWN0aW5nJywgYHNlc3Npb24gY29ubmVjdGluZywgaWQ9JHtjbGllbnQuY2xpZW50X2lkfWApXG4gIH0pXG5cbiAgY2xpZW50Lm9uKCdjb25uZWN0JywgKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdjb25uZWN0JywgYHNlc3Npb24gY29ubmVjdCwgaWQ9JHtjbGllbnQuY2xpZW50X2lkfWApXG4gIH0pXG5cbiAgY2xpZW50LmluaXQoY29uZmlnKVxuXG4gIHJldHVybiBjbGllbnRcbn1cblxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlWm9va2VlcGVyKCkge1xuICBjb25zb2xlLmxvZygndXNlJylcbiAgaWYgKCF1c2Vab29rZWVwZXIpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIGNvbnN0IGNsaWVudCA9IGNyZWF0ZUNsaWVudCgpXG5cbiAgY2xpZW50Lm9uKCdjb25uZWN0JywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IFtteXNxbCwgcmVkaXMsIHNlcnZlcl0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICBhd2FpdCBnZXRNeVNRTChjbGllbnQpLFxuICAgICAgYXdhaXQgZ2V0UmVkaXMoY2xpZW50KSxcbiAgICAgIGF3YWl0IGdldFNlcnZlcihjbGllbnQpLFxuICAgIF0pXG5cbiAgICBzZXRDYWNoZSgnbXlzcWwnLCBteXNxbClcbiAgICBzZXRDYWNoZSgncmVkaXMnLCByZWRpcylcbiAgICBzZXRDYWNoZSgnc2VydmVyJywgc2VydmVyKVxuXG4gICAgY2xpZW50LmNsb3NlKClcbiAgfSlcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0TXlTUUwoY2xpZW50KSB7XG4gIGNvbnN0IHJlc3VsdCA9IHt9XG5cbiAgZm9yIChjb25zdCBrZXkgaW4gemsubXlzcWwpIHtcbiAgICBjb25zdCBwYXRoID0gemsubXlzcWxba2V5XVxuICAgIGNvbnNvbGUubG9nKCdwYXRoJyxwYXRoKVxuICAgIGNvbnN0IG15c3FsID0ge1xuICAgICAgbWFzdGVyOiBbXSxcbiAgICAgIHNsYXZlOiBbXSxcbiAgICAgIHVzZXJuYW1lOiAnJyxcbiAgICAgIHBhc3N3b3JkOiAnJyxcbiAgICAgIGRhdGFiYXNlOiAnJyxcbiAgICB9XG4gICAgY29uc3QgcmVzID0gYXdhaXQgY2xpZW50LmdldF9jaGlsZHJlbihwYXRoLCBmYWxzZSlcbiAgICBjb25zdCBiYWNrID0gW11cblxuICAgIHJlcy5mb3JFYWNoKCh2YWwpID0+IHtcbiAgICAgIHN3aXRjaCAodmFsKSB7XG4gICAgICAgIGNhc2UgJ21hc3Rlcic6XG4gICAgICAgICAgYmFja1swXSA9ICdtYXN0ZXInXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnc2xhdmUnOlxuICAgICAgICAgIGJhY2tbMV0gPSAnc2xhdmUnXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAndXNlcm5hbWUnOlxuICAgICAgICAgIGJhY2tbMl0gPSAndXNlcm5hbWUnXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAncGFzc3dvcmQnOlxuICAgICAgICAgIGJhY2tbM10gPSAncGFzc3dvcmQnXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnZGF0YWJhc2UnOlxuICAgICAgICAgIGJhY2tbNF0gPSAnZGF0YWJhc2UnXG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgY29uc3QgW21hc3Rlciwgc2xhdmUsIHVzZXJuYW1lLCBwYXNzd29yZCwgZGF0YWJhc2VdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgYXdhaXQgY2xpZW50LmdldF9jaGlsZHJlbihwYXRoICsgJy8nICsgYmFja1swXSwgZmFsc2UpLFxuICAgICAgYXdhaXQgY2xpZW50LmdldF9jaGlsZHJlbihwYXRoICsgJy8nICsgYmFja1sxXSwgZmFsc2UpLFxuICAgICAgYXdhaXQgY2xpZW50LmdldChwYXRoICsgJy8nICsgYmFja1syXSwgZmFsc2UpLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgcmV0dXJuIGRhdGFbMV0udG9TdHJpbmcoKVxuICAgICAgfSksXG4gICAgICBhd2FpdCBjbGllbnQuZ2V0KHBhdGggKyAnLycgKyBiYWNrWzNdLCBmYWxzZSkudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICByZXR1cm4gZGF0YVsxXS50b1N0cmluZygpXG4gICAgICB9KSxcbiAgICAgIGF3YWl0IGNsaWVudC5nZXQocGF0aCArICcvJyArIGJhY2tbNF0sIGZhbHNlKS50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgIHJldHVybiBkYXRhWzFdLnRvU3RyaW5nKClcbiAgICAgIH0pLFxuICAgIF0pXG5cbiAgICBteXNxbC5tYXN0ZXIgPSBtYXN0ZXJcbiAgICBteXNxbC5zbGF2ZSA9IHNsYXZlXG4gICAgbXlzcWwudXNlcm5hbWUgPSB1c2VybmFtZVxuICAgIG15c3FsLnBhc3N3b3JkID0gcGFzc3dvcmRcbiAgICBteXNxbC5kYXRhYmFzZSA9IGRhdGFiYXNlXG5cbiAgICBjb25zb2xlLmxvZygnQ2hpbGRyZW4gb2YgJXMgYXJlOiAlai4nLCBwYXRoLCBteXNxbClcblxuICAgIHJlc3VsdFtrZXldID0gbXlzcWxcbiAgfVxuXG4gIHJldHVybiByZXN1bHRcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0UmVkaXMoY2xpZW50KSB7XG4gIGNvbnN0IHJlc3VsdCA9IHt9XG5cbiAgZm9yIChjb25zdCBrZXkgaW4gemsucmVkaXMpIHtcbiAgICBjb25zdCBwYXRoID0gemsucmVkaXNba2V5XVxuICAgIGNvbnN0IHJlZGlzID0ge1xuICAgICAgbWFzdGVyOiBbXSxcbiAgICAgIHBhc3N3b3JkOiAnJyxcbiAgICAgIGRiOiAwLFxuICAgIH1cbiAgICBjb25zdCByZXMgPSBhd2FpdCBjbGllbnQuZ2V0X2NoaWxkcmVuKHBhdGgsIGZhbHNlKVxuXG4gICAgcmVkaXMubWFzdGVyID0gcmVzXG5cbiAgICBjb25zb2xlLmxvZygnQ2hpbGRyZW4gb2YgJXMgYXJlOiAlai4nLCBwYXRoLCByZXMpXG5cbiAgICByZXN1bHRba2V5XSA9IHJlZGlzXG4gIH1cblxuICByZXR1cm4gcmVzdWx0XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldFNlcnZlcihjbGllbnQpIHtcbiAgY29uc3QgcmVzdWx0ID0ge31cblxuICBmb3IgKGNvbnN0IGtleSBpbiB6ay5zZXJ2ZXIpIHtcbiAgICBjb25zdCBwYXRoID0gemsuc2VydmVyW2tleV1cbiAgICBjb25zdCBtYXN0ZXIgPSBhd2FpdCBjbGllbnQuZ2V0X2NoaWxkcmVuKHBhdGgsIGZhbHNlKVxuXG4gICAgY29uc29sZS5sb2coJ0NoaWxkcmVuIG9mICVzIGFyZTogJWouJywgcGF0aCwgbWFzdGVyKVxuXG4gICAgcmVzdWx0W2tleV0gPSBtYXN0ZXJcbiAgfVxuXG4gIHJldHVybiByZXN1bHRcbn1cblxuYXN5bmMgZnVuY3Rpb24gYXdhaXRab29rZWVwZXIoKSB7XG4gIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgIGlmICghdXNlWm9va2VlcGVyKSB7XG4gICAgICByZXNvbHZlKGZhbHNlKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ1NlcnZlciB1c2Ugem9va2VlcGVyIC4uLicpXG4gICAgY29uc3QgbXlzcWwgPSBnZXRDYWNoZSgnbXlzcWwnKVxuICAgIGNvbnN0IHJlZGlzID0gZ2V0Q2FjaGUoJ3JlZGlzJylcbiAgICBjb25zdCBzZXJ2ZXIgPSBnZXRDYWNoZSgnc2VydmVyJylcbiAgICBjb25zb2xlLmxvZygnbXlzcWwnLG15c3FsKVxuICAgIGlmICh0eXBlb2YgbXlzcWwgPT09ICdvYmplY3QnICYmIHR5cGVvZiByZWRpcyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHNlcnZlciA9PT0gJ29iamVjdCcpIHtcbiAgICAgIHJlc29sdmUodHJ1ZSlcbiAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpXG4gICAgfVxuXG4gICAgLy8gY29uc3QgdGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgLy8gICBjb25zdCBteXNxbCA9IGdldENhY2hlKCdteXNxbCcpXG4gICAgLy8gICBjb25zdCByZWRpcyA9IGdldENhY2hlKCdyZWRpcycpXG4gICAgLy8gICBjb25zdCBzZXJ2ZXIgPSBnZXRDYWNoZSgnc2VydmVyJylcbiAgICAvLyAgIGNvbnNvbGUubG9nKCdteXNxbCcsbXlzcWwpXG4gICAgLy8gICBpZiAodHlwZW9mIG15c3FsID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgcmVkaXMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBzZXJ2ZXIgPT09ICdvYmplY3QnKSB7XG4gICAgLy8gICAgIHJlc29sdmUodHJ1ZSlcbiAgICAvLyAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcilcbiAgICAvLyAgIH1cbiAgICAvLyB9LCAzMClcbiAgfSlcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7IGF3YWl0Wm9va2VlcGVyLCBoYW5kbGVab29rZWVwZXIgfVxuIl19",
    "map": {
      "version": 3,
      "sources": [
        "zookeeper.js"
      ],
      "names": [
        "ZooKeeper",
        "require",
        "zk",
        "getRandomSubscript",
        "setCache",
        "getCache",
        "isPro",
        "isLocalPro",
        "release",
        "test",
        "useZookeeper",
        "getZkConfig",
        "key",
        "length",
        "console",
        "log",
        "result",
        "createClient",
        "timeoutMs",
        "config",
        "connect",
        "timeout",
        "debug_level",
        "ZOO_LOG_LEVEL_WARN",
        "host_order_deterministic",
        "client",
        "on",
        "client_id",
        "init",
        "handleZookeeper",
        "mysql",
        "redis",
        "server",
        "Promise",
        "all",
        "getMySQL",
        "getRedis",
        "getServer",
        "close",
        "path",
        "master",
        "slave",
        "username",
        "password",
        "database",
        "res",
        "get_children",
        "back",
        "forEach",
        "val",
        "get",
        "then",
        "data",
        "toString",
        "db",
        "awaitZookeeper",
        "resolve",
        "clearInterval",
        "timer",
        "module",
        "exports"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/dongshx/Documents/study/my-project/server/libs/",
      "sourcesContent": [
        "const ZooKeeper = require('zookeeper')\nconst zk = require('../config/zk')\nconst { getRandomSubscript } = require('../libs/random')\nconst { setCache, getCache } = require('../libs/cache-store')\nconst { isPro, isLocalPro, release, test, useZookeeper } = require('../config/env')\n\nfunction getZkConfig() {\n  let zk = test\n\n  if (isPro) {\n    zk = release\n  } else if (isLocalPro) {\n    zk = release\n  }\n\n  const key = getRandomSubscript(zk.length)\n  console.log('key', key)\n  const result = zk[key]\n  console.log('result', result)\n  return result\n}\n\n/**\n * @param timeoutMs {number}\n * @returns {ZooKeeper}\n */\nfunction createClient(timeoutMs = 5000) {\n  const config = {\n    connect: getZkConfig(),\n    timeout: timeoutMs,\n    debug_level: ZooKeeper.ZOO_LOG_LEVEL_WARN,\n    host_order_deterministic: false,\n  }\n\n  let client = new ZooKeeper(config)\n\n  client.on('close', () => {\n    console.log('close', `session closed, id=${client.client_id}`)\n    client = null\n  })\n\n  client.on('connecting', () => {\n    console.log('connecting', `session connecting, id=${client.client_id}`)\n  })\n\n  client.on('connect', () => {\n    console.log('connect', `session connect, id=${client.client_id}`)\n  })\n\n  client.init(config)\n\n  return client\n}\n\nasync function handleZookeeper() {\n  console.log('use')\n  if (!useZookeeper) {\n    return\n  }\n\n  const client = createClient()\n\n  client.on('connect', async () => {\n    const [mysql, redis, server] = await Promise.all([\n      await getMySQL(client),\n      await getRedis(client),\n      await getServer(client),\n    ])\n\n    setCache('mysql', mysql)\n    setCache('redis', redis)\n    setCache('server', server)\n\n    client.close()\n  })\n}\n\nasync function getMySQL(client) {\n  const result = {}\n\n  for (const key in zk.mysql) {\n    const path = zk.mysql[key]\n    console.log('path',path)\n    const mysql = {\n      master: [],\n      slave: [],\n      username: '',\n      password: '',\n      database: '',\n    }\n    const res = await client.get_children(path, false)\n    const back = []\n\n    res.forEach((val) => {\n      switch (val) {\n        case 'master':\n          back[0] = 'master'\n          break\n        case 'slave':\n          back[1] = 'slave'\n          break\n        case 'username':\n          back[2] = 'username'\n          break\n        case 'password':\n          back[3] = 'password'\n          break\n        case 'database':\n          back[4] = 'database'\n          break\n      }\n    })\n\n    const [master, slave, username, password, database] = await Promise.all([\n      await client.get_children(path + '/' + back[0], false),\n      await client.get_children(path + '/' + back[1], false),\n      await client.get(path + '/' + back[2], false).then((data) => {\n        return data[1].toString()\n      }),\n      await client.get(path + '/' + back[3], false).then((data) => {\n        return data[1].toString()\n      }),\n      await client.get(path + '/' + back[4], false).then((data) => {\n        return data[1].toString()\n      }),\n    ])\n\n    mysql.master = master\n    mysql.slave = slave\n    mysql.username = username\n    mysql.password = password\n    mysql.database = database\n\n    console.log('Children of %s are: %j.', path, mysql)\n\n    result[key] = mysql\n  }\n\n  return result\n}\n\nasync function getRedis(client) {\n  const result = {}\n\n  for (const key in zk.redis) {\n    const path = zk.redis[key]\n    const redis = {\n      master: [],\n      password: '',\n      db: 0,\n    }\n    const res = await client.get_children(path, false)\n\n    redis.master = res\n\n    console.log('Children of %s are: %j.', path, res)\n\n    result[key] = redis\n  }\n\n  return result\n}\n\nasync function getServer(client) {\n  const result = {}\n\n  for (const key in zk.server) {\n    const path = zk.server[key]\n    const master = await client.get_children(path, false)\n\n    console.log('Children of %s are: %j.', path, master)\n\n    result[key] = master\n  }\n\n  return result\n}\n\nasync function awaitZookeeper() {\n  return await new Promise((resolve) => {\n    if (!useZookeeper) {\n      resolve(false)\n      return\n    }\n\n    console.log('Server use zookeeper ...')\n    const mysql = getCache('mysql')\n    const redis = getCache('redis')\n    const server = getCache('server')\n    console.log('mysql',mysql)\n    if (typeof mysql === 'object' && typeof redis === 'object' && typeof server === 'object') {\n      resolve(true)\n      clearInterval(timer)\n    }\n\n    // const timer = setInterval(() => {\n    //   const mysql = getCache('mysql')\n    //   const redis = getCache('redis')\n    //   const server = getCache('server')\n    //   console.log('mysql',mysql)\n    //   if (typeof mysql === 'object' && typeof redis === 'object' && typeof server === 'object') {\n    //     resolve(true)\n    //     clearInterval(timer)\n    //   }\n    // }, 30)\n  })\n}\n\nmodule.exports = { awaitZookeeper, handleZookeeper }\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1637925171064
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/dongshx/Documents/study/my-project/server/config/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/dongshx/Documents/study/my-project\",\"filename\":\"/Users/dongshx/Documents/study/my-project/server/config/zk.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/Users/dongshx/Documents/study/my-project\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.16.0:local": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/dongshx/Documents/study/my-project/server/config/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/dongshx/Documents/study/my-project",
      "filename": "/Users/dongshx/Documents/study/my-project/server/config/zk.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "local",
      "root": "/Users/dongshx/Documents/study/my-project",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/dongshx/Documents/study/my-project/server/config/zk.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/dongshx/Documents/study/my-project/server/config/zk.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/dongshx/Documents/study/my-project/server/config/",
        "sourceFileName": "zk.js"
      }
    },
    "ast": null,
    "code": "// TODO 这个要去掉\nconst zk = {\n  mysql: {\n    activity: '/test'\n  },\n  redis: {\n    users: '/blued/backend/umem/users'\n  },\n  server: {\n    send: '/blued/service/hermes/send'\n  }\n};\nmodule.exports = zk;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInprLmpzIl0sIm5hbWVzIjpbInprIiwibXlzcWwiLCJhY3Rpdml0eSIsInJlZGlzIiwidXNlcnMiLCJzZXJ2ZXIiLCJzZW5kIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQSxNQUFNQSxFQUFFLEdBQUc7QUFDVEMsRUFBQUEsS0FBSyxFQUFFO0FBQ0xDLElBQUFBLFFBQVEsRUFBRTtBQURMLEdBREU7QUFJVEMsRUFBQUEsS0FBSyxFQUFFO0FBQ0xDLElBQUFBLEtBQUssRUFBRTtBQURGLEdBSkU7QUFPVEMsRUFBQUEsTUFBTSxFQUFFO0FBQ05DLElBQUFBLElBQUksRUFBRTtBQURBO0FBUEMsQ0FBWDtBQVlBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUJSLEVBQWpCIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9kb25nc2h4L0RvY3VtZW50cy9zdHVkeS9teS1wcm9qZWN0L3NlcnZlci9jb25maWcvIiwic291cmNlc0NvbnRlbnQiOlsiLy8gVE9ETyDov5nkuKropoHljrvmjolcbmNvbnN0IHprID0ge1xuICBteXNxbDoge1xuICAgIGFjdGl2aXR5OiAnL3Rlc3QnLFxuICB9LFxuICByZWRpczoge1xuICAgIHVzZXJzOiAnL2JsdWVkL2JhY2tlbmQvdW1lbS91c2VycycsXG4gIH0sXG4gIHNlcnZlcjoge1xuICAgIHNlbmQ6ICcvYmx1ZWQvc2VydmljZS9oZXJtZXMvc2VuZCcsXG4gIH0sXG59XG5cbm1vZHVsZS5leHBvcnRzID0gemtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "zk.js"
      ],
      "names": [
        "zk",
        "mysql",
        "activity",
        "redis",
        "users",
        "server",
        "send",
        "module",
        "exports"
      ],
      "mappings": "AAAA;AACA,MAAMA,EAAE,GAAG;AACTC,EAAAA,KAAK,EAAE;AACLC,IAAAA,QAAQ,EAAE;AADL,GADE;AAITC,EAAAA,KAAK,EAAE;AACLC,IAAAA,KAAK,EAAE;AADF,GAJE;AAOTC,EAAAA,MAAM,EAAE;AACNC,IAAAA,IAAI,EAAE;AADA;AAPC,CAAX;AAYAC,MAAM,CAACC,OAAP,GAAiBR,EAAjB",
      "sourceRoot": "/Users/dongshx/Documents/study/my-project/server/config/",
      "sourcesContent": [
        "// TODO 这个要去掉\nconst zk = {\n  mysql: {\n    activity: '/test',\n  },\n  redis: {\n    users: '/blued/backend/umem/users',\n  },\n  server: {\n    send: '/blued/service/hermes/send',\n  },\n}\n\nmodule.exports = zk\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1637925112460
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/dongshx/Documents/study/my-project/server/libs/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/dongshx/Documents/study/my-project\",\"filename\":\"/Users/dongshx/Documents/study/my-project/server/libs/random.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/Users/dongshx/Documents/study/my-project\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.16.0:local": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/dongshx/Documents/study/my-project/server/libs/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/dongshx/Documents/study/my-project",
      "filename": "/Users/dongshx/Documents/study/my-project/server/libs/random.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "local",
      "root": "/Users/dongshx/Documents/study/my-project",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/dongshx/Documents/study/my-project/server/libs/random.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/dongshx/Documents/study/my-project/server/libs/random.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/dongshx/Documents/study/my-project/server/libs/",
        "sourceFileName": "random.js"
      }
    },
    "ast": null,
    "code": "const getRandomNumber = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;\n\nconst getRandomSubscript = len => Math.floor(Math.random() * len + 1) - 1;\n\nmodule.exports = {\n  getRandomNumber,\n  getRandomSubscript\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJhbmRvbS5qcyJdLCJuYW1lcyI6WyJnZXRSYW5kb21OdW1iZXIiLCJtaW4iLCJtYXgiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJnZXRSYW5kb21TdWJzY3JpcHQiLCJsZW4iLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxlQUFlLEdBQUcsQ0FBQ0MsR0FBRCxFQUFNQyxHQUFOLEtBQWNDLElBQUksQ0FBQ0MsS0FBTCxDQUFXRCxJQUFJLENBQUNFLE1BQUwsTUFBaUJILEdBQUcsR0FBR0QsR0FBTixHQUFZLENBQTdCLENBQVgsSUFBOENBLEdBQXBGOztBQUVBLE1BQU1LLGtCQUFrQixHQUFJQyxHQUFELElBQVNKLElBQUksQ0FBQ0MsS0FBTCxDQUFXRCxJQUFJLENBQUNFLE1BQUwsS0FBZ0JFLEdBQWhCLEdBQXNCLENBQWpDLElBQXNDLENBQTFFOztBQUVBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUI7QUFDZlQsRUFBQUEsZUFEZTtBQUVmTSxFQUFBQTtBQUZlLENBQWpCIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9kb25nc2h4L0RvY3VtZW50cy9zdHVkeS9teS1wcm9qZWN0L3NlcnZlci9saWJzLyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGdldFJhbmRvbU51bWJlciA9IChtaW4sIG1heCkgPT4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKSArIG1pblxuXG5jb25zdCBnZXRSYW5kb21TdWJzY3JpcHQgPSAobGVuKSA9PiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBsZW4gKyAxKSAtIDFcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGdldFJhbmRvbU51bWJlcixcbiAgZ2V0UmFuZG9tU3Vic2NyaXB0LFxufVxuIl19",
    "map": {
      "version": 3,
      "sources": [
        "random.js"
      ],
      "names": [
        "getRandomNumber",
        "min",
        "max",
        "Math",
        "floor",
        "random",
        "getRandomSubscript",
        "len",
        "module",
        "exports"
      ],
      "mappings": "AAAA,MAAMA,eAAe,GAAG,CAACC,GAAD,EAAMC,GAAN,KAAcC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,MAAiBH,GAAG,GAAGD,GAAN,GAAY,CAA7B,CAAX,IAA8CA,GAApF;;AAEA,MAAMK,kBAAkB,GAAIC,GAAD,IAASJ,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgBE,GAAhB,GAAsB,CAAjC,IAAsC,CAA1E;;AAEAC,MAAM,CAACC,OAAP,GAAiB;AACfT,EAAAA,eADe;AAEfM,EAAAA;AAFe,CAAjB",
      "sourceRoot": "/Users/dongshx/Documents/study/my-project/server/libs/",
      "sourcesContent": [
        "const getRandomNumber = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min\n\nconst getRandomSubscript = (len) => Math.floor(Math.random() * len + 1) - 1\n\nmodule.exports = {\n  getRandomNumber,\n  getRandomSubscript,\n}\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1637910337052
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/dongshx/Documents/study/my-project/server/libs/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/dongshx/Documents/study/my-project\",\"filename\":\"/Users/dongshx/Documents/study/my-project/server/libs/cache-store.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/Users/dongshx/Documents/study/my-project\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.16.0:local": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/dongshx/Documents/study/my-project/server/libs/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/dongshx/Documents/study/my-project",
      "filename": "/Users/dongshx/Documents/study/my-project/server/libs/cache-store.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "local",
      "root": "/Users/dongshx/Documents/study/my-project",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/dongshx/Documents/study/my-project/server/libs/cache-store.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/dongshx/Documents/study/my-project/server/libs/cache-store.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/dongshx/Documents/study/my-project/server/libs/",
        "sourceFileName": "cache-store.js"
      }
    },
    "ast": null,
    "code": "const Cache = require('./cache');\n\nconst newCache = new Cache();\n\nfunction handleCache(key, func) {\n  if (!hasCache(key)) {\n    if (!func || typeof func !== 'function') {\n      throw new Error('\"func\" always must be a function call');\n    }\n\n    try {\n      setCache(key, func());\n    } catch (e) {\n      console.error(`error with key: ${key}`, e);\n    }\n  }\n\n  return getCache(key);\n}\n\nfunction getCache(key) {\n  return newCache.get(key);\n}\n\nfunction hasCache(key) {\n  return newCache.has(key);\n}\n\nfunction setCache(key, value) {\n  newCache.set(key, value);\n}\n\nmodule.exports = {\n  handleCache,\n  getCache,\n  hasCache,\n  setCache\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhY2hlLXN0b3JlLmpzIl0sIm5hbWVzIjpbIkNhY2hlIiwicmVxdWlyZSIsIm5ld0NhY2hlIiwiaGFuZGxlQ2FjaGUiLCJrZXkiLCJmdW5jIiwiaGFzQ2FjaGUiLCJFcnJvciIsInNldENhY2hlIiwiZSIsImNvbnNvbGUiLCJlcnJvciIsImdldENhY2hlIiwiZ2V0IiwiaGFzIiwidmFsdWUiLCJzZXQiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxLQUFLLEdBQUdDLE9BQU8sQ0FBQyxTQUFELENBQXJCOztBQUVBLE1BQU1DLFFBQVEsR0FBRyxJQUFJRixLQUFKLEVBQWpCOztBQUVBLFNBQVNHLFdBQVQsQ0FBcUJDLEdBQXJCLEVBQTBCQyxJQUExQixFQUFnQztBQUM5QixNQUFJLENBQUNDLFFBQVEsQ0FBQ0YsR0FBRCxDQUFiLEVBQW9CO0FBQ2xCLFFBQUksQ0FBQ0MsSUFBRCxJQUFTLE9BQU9BLElBQVAsS0FBZ0IsVUFBN0IsRUFBeUM7QUFDdkMsWUFBTSxJQUFJRSxLQUFKLENBQVUsdUNBQVYsQ0FBTjtBQUNEOztBQUVELFFBQUk7QUFDRkMsTUFBQUEsUUFBUSxDQUFDSixHQUFELEVBQU1DLElBQUksRUFBVixDQUFSO0FBQ0QsS0FGRCxDQUVFLE9BQU9JLENBQVAsRUFBVTtBQUNWQyxNQUFBQSxPQUFPLENBQUNDLEtBQVIsQ0FBZSxtQkFBa0JQLEdBQUksRUFBckMsRUFBd0NLLENBQXhDO0FBQ0Q7QUFDRjs7QUFFRCxTQUFPRyxRQUFRLENBQUNSLEdBQUQsQ0FBZjtBQUNEOztBQUVELFNBQVNRLFFBQVQsQ0FBa0JSLEdBQWxCLEVBQXVCO0FBQ3JCLFNBQU9GLFFBQVEsQ0FBQ1csR0FBVCxDQUFhVCxHQUFiLENBQVA7QUFDRDs7QUFFRCxTQUFTRSxRQUFULENBQWtCRixHQUFsQixFQUF1QjtBQUNyQixTQUFPRixRQUFRLENBQUNZLEdBQVQsQ0FBYVYsR0FBYixDQUFQO0FBQ0Q7O0FBRUQsU0FBU0ksUUFBVCxDQUFrQkosR0FBbEIsRUFBdUJXLEtBQXZCLEVBQThCO0FBQzVCYixFQUFBQSxRQUFRLENBQUNjLEdBQVQsQ0FBYVosR0FBYixFQUFrQlcsS0FBbEI7QUFDRDs7QUFFREUsTUFBTSxDQUFDQyxPQUFQLEdBQWlCO0FBQUVmLEVBQUFBLFdBQUY7QUFBZVMsRUFBQUEsUUFBZjtBQUF5Qk4sRUFBQUEsUUFBekI7QUFBbUNFLEVBQUFBO0FBQW5DLENBQWpCIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9kb25nc2h4L0RvY3VtZW50cy9zdHVkeS9teS1wcm9qZWN0L3NlcnZlci9saWJzLyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IENhY2hlID0gcmVxdWlyZSgnLi9jYWNoZScpXG5cbmNvbnN0IG5ld0NhY2hlID0gbmV3IENhY2hlKClcblxuZnVuY3Rpb24gaGFuZGxlQ2FjaGUoa2V5LCBmdW5jKSB7XG4gIGlmICghaGFzQ2FjaGUoa2V5KSkge1xuICAgIGlmICghZnVuYyB8fCB0eXBlb2YgZnVuYyAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdcImZ1bmNcIiBhbHdheXMgbXVzdCBiZSBhIGZ1bmN0aW9uIGNhbGwnKVxuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBzZXRDYWNoZShrZXksIGZ1bmMoKSlcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBlcnJvciB3aXRoIGtleTogJHtrZXl9YCwgZSlcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZ2V0Q2FjaGUoa2V5KVxufVxuXG5mdW5jdGlvbiBnZXRDYWNoZShrZXkpIHtcbiAgcmV0dXJuIG5ld0NhY2hlLmdldChrZXkpXG59XG5cbmZ1bmN0aW9uIGhhc0NhY2hlKGtleSkge1xuICByZXR1cm4gbmV3Q2FjaGUuaGFzKGtleSlcbn1cblxuZnVuY3Rpb24gc2V0Q2FjaGUoa2V5LCB2YWx1ZSkge1xuICBuZXdDYWNoZS5zZXQoa2V5LCB2YWx1ZSlcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7IGhhbmRsZUNhY2hlLCBnZXRDYWNoZSwgaGFzQ2FjaGUsIHNldENhY2hlIH1cbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "cache-store.js"
      ],
      "names": [
        "Cache",
        "require",
        "newCache",
        "handleCache",
        "key",
        "func",
        "hasCache",
        "Error",
        "setCache",
        "e",
        "console",
        "error",
        "getCache",
        "get",
        "has",
        "value",
        "set",
        "module",
        "exports"
      ],
      "mappings": "AAAA,MAAMA,KAAK,GAAGC,OAAO,CAAC,SAAD,CAArB;;AAEA,MAAMC,QAAQ,GAAG,IAAIF,KAAJ,EAAjB;;AAEA,SAASG,WAAT,CAAqBC,GAArB,EAA0BC,IAA1B,EAAgC;AAC9B,MAAI,CAACC,QAAQ,CAACF,GAAD,CAAb,EAAoB;AAClB,QAAI,CAACC,IAAD,IAAS,OAAOA,IAAP,KAAgB,UAA7B,EAAyC;AACvC,YAAM,IAAIE,KAAJ,CAAU,uCAAV,CAAN;AACD;;AAED,QAAI;AACFC,MAAAA,QAAQ,CAACJ,GAAD,EAAMC,IAAI,EAAV,CAAR;AACD,KAFD,CAEE,OAAOI,CAAP,EAAU;AACVC,MAAAA,OAAO,CAACC,KAAR,CAAe,mBAAkBP,GAAI,EAArC,EAAwCK,CAAxC;AACD;AACF;;AAED,SAAOG,QAAQ,CAACR,GAAD,CAAf;AACD;;AAED,SAASQ,QAAT,CAAkBR,GAAlB,EAAuB;AACrB,SAAOF,QAAQ,CAACW,GAAT,CAAaT,GAAb,CAAP;AACD;;AAED,SAASE,QAAT,CAAkBF,GAAlB,EAAuB;AACrB,SAAOF,QAAQ,CAACY,GAAT,CAAaV,GAAb,CAAP;AACD;;AAED,SAASI,QAAT,CAAkBJ,GAAlB,EAAuBW,KAAvB,EAA8B;AAC5Bb,EAAAA,QAAQ,CAACc,GAAT,CAAaZ,GAAb,EAAkBW,KAAlB;AACD;;AAEDE,MAAM,CAACC,OAAP,GAAiB;AAAEf,EAAAA,WAAF;AAAeS,EAAAA,QAAf;AAAyBN,EAAAA,QAAzB;AAAmCE,EAAAA;AAAnC,CAAjB",
      "sourceRoot": "/Users/dongshx/Documents/study/my-project/server/libs/",
      "sourcesContent": [
        "const Cache = require('./cache')\n\nconst newCache = new Cache()\n\nfunction handleCache(key, func) {\n  if (!hasCache(key)) {\n    if (!func || typeof func !== 'function') {\n      throw new Error('\"func\" always must be a function call')\n    }\n\n    try {\n      setCache(key, func())\n    } catch (e) {\n      console.error(`error with key: ${key}`, e)\n    }\n  }\n\n  return getCache(key)\n}\n\nfunction getCache(key) {\n  return newCache.get(key)\n}\n\nfunction hasCache(key) {\n  return newCache.has(key)\n}\n\nfunction setCache(key, value) {\n  newCache.set(key, value)\n}\n\nmodule.exports = { handleCache, getCache, hasCache, setCache }\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1637925182087
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/dongshx/Documents/study/my-project/server/libs/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/dongshx/Documents/study/my-project\",\"filename\":\"/Users/dongshx/Documents/study/my-project/server/libs/cache.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/Users/dongshx/Documents/study/my-project\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.16.0:local": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/dongshx/Documents/study/my-project/server/libs/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/dongshx/Documents/study/my-project",
      "filename": "/Users/dongshx/Documents/study/my-project/server/libs/cache.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "local",
      "root": "/Users/dongshx/Documents/study/my-project",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/dongshx/Documents/study/my-project/server/libs/cache.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/dongshx/Documents/study/my-project/server/libs/cache.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/dongshx/Documents/study/my-project/server/libs/",
        "sourceFileName": "cache.js"
      }
    },
    "ast": null,
    "code": "class Cache {\n  constructor() {\n    this.cache = new Map();\n  }\n\n  has(key) {\n    return this.cache.has(key);\n  }\n\n  get(key) {\n    console.log('this.cache', this.cache);\n    return this.cache.get(key);\n  }\n\n  set(key, value) {\n    return this.cache.set(key, value);\n  }\n\n}\n\nmodule.exports = Cache;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhY2hlLmpzIl0sIm5hbWVzIjpbIkNhY2hlIiwiY29uc3RydWN0b3IiLCJjYWNoZSIsIk1hcCIsImhhcyIsImtleSIsImdldCIsImNvbnNvbGUiLCJsb2ciLCJzZXQiLCJ2YWx1ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLEtBQU4sQ0FBWTtBQUNWQyxFQUFBQSxXQUFXLEdBQUc7QUFDWixTQUFLQyxLQUFMLEdBQWEsSUFBSUMsR0FBSixFQUFiO0FBQ0Q7O0FBRURDLEVBQUFBLEdBQUcsQ0FBQ0MsR0FBRCxFQUFNO0FBQ1AsV0FBTyxLQUFLSCxLQUFMLENBQVdFLEdBQVgsQ0FBZUMsR0FBZixDQUFQO0FBQ0Q7O0FBRURDLEVBQUFBLEdBQUcsQ0FBQ0QsR0FBRCxFQUFNO0FBQ1BFLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLFlBQVosRUFBeUIsS0FBS04sS0FBOUI7QUFDQSxXQUFPLEtBQUtBLEtBQUwsQ0FBV0ksR0FBWCxDQUFlRCxHQUFmLENBQVA7QUFDRDs7QUFFREksRUFBQUEsR0FBRyxDQUFDSixHQUFELEVBQU1LLEtBQU4sRUFBYTtBQUNkLFdBQU8sS0FBS1IsS0FBTCxDQUFXTyxHQUFYLENBQWVKLEdBQWYsRUFBb0JLLEtBQXBCLENBQVA7QUFDRDs7QUFoQlM7O0FBbUJaQyxNQUFNLENBQUNDLE9BQVAsR0FBaUJaLEtBQWpCIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9kb25nc2h4L0RvY3VtZW50cy9zdHVkeS9teS1wcm9qZWN0L3NlcnZlci9saWJzLyIsInNvdXJjZXNDb250ZW50IjpbImNsYXNzIENhY2hlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5jYWNoZSA9IG5ldyBNYXAoKVxuICB9XG5cbiAgaGFzKGtleSkge1xuICAgIHJldHVybiB0aGlzLmNhY2hlLmhhcyhrZXkpXG4gIH1cblxuICBnZXQoa2V5KSB7XG4gICAgY29uc29sZS5sb2coJ3RoaXMuY2FjaGUnLHRoaXMuY2FjaGUpXG4gICAgcmV0dXJuIHRoaXMuY2FjaGUuZ2V0KGtleSlcbiAgfVxuXG4gIHNldChrZXksIHZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXMuY2FjaGUuc2V0KGtleSwgdmFsdWUpXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBDYWNoZVxuIl19",
    "map": {
      "version": 3,
      "sources": [
        "cache.js"
      ],
      "names": [
        "Cache",
        "constructor",
        "cache",
        "Map",
        "has",
        "key",
        "get",
        "console",
        "log",
        "set",
        "value",
        "module",
        "exports"
      ],
      "mappings": "AAAA,MAAMA,KAAN,CAAY;AACVC,EAAAA,WAAW,GAAG;AACZ,SAAKC,KAAL,GAAa,IAAIC,GAAJ,EAAb;AACD;;AAEDC,EAAAA,GAAG,CAACC,GAAD,EAAM;AACP,WAAO,KAAKH,KAAL,CAAWE,GAAX,CAAeC,GAAf,CAAP;AACD;;AAEDC,EAAAA,GAAG,CAACD,GAAD,EAAM;AACPE,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAAyB,KAAKN,KAA9B;AACA,WAAO,KAAKA,KAAL,CAAWI,GAAX,CAAeD,GAAf,CAAP;AACD;;AAEDI,EAAAA,GAAG,CAACJ,GAAD,EAAMK,KAAN,EAAa;AACd,WAAO,KAAKR,KAAL,CAAWO,GAAX,CAAeJ,GAAf,EAAoBK,KAApB,CAAP;AACD;;AAhBS;;AAmBZC,MAAM,CAACC,OAAP,GAAiBZ,KAAjB",
      "sourceRoot": "/Users/dongshx/Documents/study/my-project/server/libs/",
      "sourcesContent": [
        "class Cache {\n  constructor() {\n    this.cache = new Map()\n  }\n\n  has(key) {\n    return this.cache.has(key)\n  }\n\n  get(key) {\n    console.log('this.cache',this.cache)\n    return this.cache.get(key)\n  }\n\n  set(key, value) {\n    return this.cache.set(key, value)\n  }\n}\n\nmodule.exports = Cache\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1637924885743
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/dongshx/Documents/study/my-project/server/config/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/dongshx/Documents/study/my-project\",\"filename\":\"/Users/dongshx/Documents/study/my-project/server/config/env.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/Users/dongshx/Documents/study/my-project\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.16.0:local": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/dongshx/Documents/study/my-project/server/config/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/dongshx/Documents/study/my-project",
      "filename": "/Users/dongshx/Documents/study/my-project/server/config/env.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "local",
      "root": "/Users/dongshx/Documents/study/my-project",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/dongshx/Documents/study/my-project/server/config/env.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/dongshx/Documents/study/my-project/server/config/env.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/dongshx/Documents/study/my-project/server/config/",
        "sourceFileName": "env.js"
      }
    },
    "ast": null,
    "code": "// 开发、测试、正式环境\nconst env = process.env.NODE_ENV;\nmodule.exports.isLocal = env === 'local';\nmodule.exports.isDev = env === 'development';\nmodule.exports.isPro = env === 'production'; // 在本地使用线上数据库\n\nconst dev = process.env.NODE_DEV;\nmodule.exports.isLocalPro = dev === 'localPro'; // zookeeper\n\nmodule.exports.useZookeeper = true;\nmodule.exports.release = ['10.10.182.158:2181', '10.10.101.151:2181', '10.10.102.25:2181'];\nmodule.exports.test = ['10.9.158.210:2181', '10.9.114.167:2181', '10.9.105.4:2181'];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVudi5qcyJdLCJuYW1lcyI6WyJlbnYiLCJwcm9jZXNzIiwiTk9ERV9FTlYiLCJtb2R1bGUiLCJleHBvcnRzIiwiaXNMb2NhbCIsImlzRGV2IiwiaXNQcm8iLCJkZXYiLCJOT0RFX0RFViIsImlzTG9jYWxQcm8iLCJ1c2Vab29rZWVwZXIiLCJyZWxlYXNlIiwidGVzdCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQSxNQUFNQSxHQUFHLEdBQUdDLE9BQU8sQ0FBQ0QsR0FBUixDQUFZRSxRQUF4QjtBQUNBQyxNQUFNLENBQUNDLE9BQVAsQ0FBZUMsT0FBZixHQUF5QkwsR0FBRyxLQUFLLE9BQWpDO0FBQ0FHLE1BQU0sQ0FBQ0MsT0FBUCxDQUFlRSxLQUFmLEdBQXVCTixHQUFHLEtBQUssYUFBL0I7QUFDQUcsTUFBTSxDQUFDQyxPQUFQLENBQWVHLEtBQWYsR0FBdUJQLEdBQUcsS0FBSyxZQUEvQixDLENBRUE7O0FBQ0EsTUFBTVEsR0FBRyxHQUFHUCxPQUFPLENBQUNELEdBQVIsQ0FBWVMsUUFBeEI7QUFDQU4sTUFBTSxDQUFDQyxPQUFQLENBQWVNLFVBQWYsR0FBNEJGLEdBQUcsS0FBSyxVQUFwQyxDLENBRUE7O0FBQ0FMLE1BQU0sQ0FBQ0MsT0FBUCxDQUFlTyxZQUFmLEdBQThCLElBQTlCO0FBQ0FSLE1BQU0sQ0FBQ0MsT0FBUCxDQUFlUSxPQUFmLEdBQXlCLENBQUMsb0JBQUQsRUFBdUIsb0JBQXZCLEVBQTZDLG1CQUE3QyxDQUF6QjtBQUNBVCxNQUFNLENBQUNDLE9BQVAsQ0FBZVMsSUFBZixHQUFzQixDQUFDLG1CQUFELEVBQXNCLG1CQUF0QixFQUEyQyxpQkFBM0MsQ0FBdEIiLCJzb3VyY2VSb290IjoiL1VzZXJzL2RvbmdzaHgvRG9jdW1lbnRzL3N0dWR5L215LXByb2plY3Qvc2VydmVyL2NvbmZpZy8iLCJzb3VyY2VzQ29udGVudCI6WyIvLyDlvIDlj5HjgIHmtYvor5XjgIHmraPlvI/njq/looNcbmNvbnN0IGVudiA9IHByb2Nlc3MuZW52Lk5PREVfRU5WXG5tb2R1bGUuZXhwb3J0cy5pc0xvY2FsID0gZW52ID09PSAnbG9jYWwnXG5tb2R1bGUuZXhwb3J0cy5pc0RldiA9IGVudiA9PT0gJ2RldmVsb3BtZW50J1xubW9kdWxlLmV4cG9ydHMuaXNQcm8gPSBlbnYgPT09ICdwcm9kdWN0aW9uJ1xuXG4vLyDlnKjmnKzlnLDkvb/nlKjnur/kuIrmlbDmja7lupNcbmNvbnN0IGRldiA9IHByb2Nlc3MuZW52Lk5PREVfREVWXG5tb2R1bGUuZXhwb3J0cy5pc0xvY2FsUHJvID0gZGV2ID09PSAnbG9jYWxQcm8nXG5cbi8vIHpvb2tlZXBlclxubW9kdWxlLmV4cG9ydHMudXNlWm9va2VlcGVyID0gdHJ1ZVxubW9kdWxlLmV4cG9ydHMucmVsZWFzZSA9IFsnMTAuMTAuMTgyLjE1ODoyMTgxJywgJzEwLjEwLjEwMS4xNTE6MjE4MScsICcxMC4xMC4xMDIuMjU6MjE4MSddXG5tb2R1bGUuZXhwb3J0cy50ZXN0ID0gWycxMC45LjE1OC4yMTA6MjE4MScsICcxMC45LjExNC4xNjc6MjE4MScsICcxMC45LjEwNS40OjIxODEnXVxuIl19",
    "map": {
      "version": 3,
      "sources": [
        "env.js"
      ],
      "names": [
        "env",
        "process",
        "NODE_ENV",
        "module",
        "exports",
        "isLocal",
        "isDev",
        "isPro",
        "dev",
        "NODE_DEV",
        "isLocalPro",
        "useZookeeper",
        "release",
        "test"
      ],
      "mappings": "AAAA;AACA,MAAMA,GAAG,GAAGC,OAAO,CAACD,GAAR,CAAYE,QAAxB;AACAC,MAAM,CAACC,OAAP,CAAeC,OAAf,GAAyBL,GAAG,KAAK,OAAjC;AACAG,MAAM,CAACC,OAAP,CAAeE,KAAf,GAAuBN,GAAG,KAAK,aAA/B;AACAG,MAAM,CAACC,OAAP,CAAeG,KAAf,GAAuBP,GAAG,KAAK,YAA/B,C,CAEA;;AACA,MAAMQ,GAAG,GAAGP,OAAO,CAACD,GAAR,CAAYS,QAAxB;AACAN,MAAM,CAACC,OAAP,CAAeM,UAAf,GAA4BF,GAAG,KAAK,UAApC,C,CAEA;;AACAL,MAAM,CAACC,OAAP,CAAeO,YAAf,GAA8B,IAA9B;AACAR,MAAM,CAACC,OAAP,CAAeQ,OAAf,GAAyB,CAAC,oBAAD,EAAuB,oBAAvB,EAA6C,mBAA7C,CAAzB;AACAT,MAAM,CAACC,OAAP,CAAeS,IAAf,GAAsB,CAAC,mBAAD,EAAsB,mBAAtB,EAA2C,iBAA3C,CAAtB",
      "sourceRoot": "/Users/dongshx/Documents/study/my-project/server/config/",
      "sourcesContent": [
        "// 开发、测试、正式环境\nconst env = process.env.NODE_ENV\nmodule.exports.isLocal = env === 'local'\nmodule.exports.isDev = env === 'development'\nmodule.exports.isPro = env === 'production'\n\n// 在本地使用线上数据库\nconst dev = process.env.NODE_DEV\nmodule.exports.isLocalPro = dev === 'localPro'\n\n// zookeeper\nmodule.exports.useZookeeper = true\nmodule.exports.release = ['10.10.182.158:2181', '10.10.101.151:2181', '10.10.102.25:2181']\nmodule.exports.test = ['10.9.158.210:2181', '10.9.114.167:2181', '10.9.105.4:2181']\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1637924570531
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/dongshx/Documents/study/my-project/bin/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/dongshx/Documents/study/my-project\",\"filename\":\"/Users/dongshx/Documents/study/my-project/bin/react-dom-server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/Users/dongshx/Documents/study/my-project\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.16.0:local": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/dongshx/Documents/study/my-project/bin/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/dongshx/Documents/study/my-project",
      "filename": "/Users/dongshx/Documents/study/my-project/bin/react-dom-server.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "local",
      "root": "/Users/dongshx/Documents/study/my-project",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/dongshx/Documents/study/my-project/bin/react-dom-server.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/dongshx/Documents/study/my-project/bin/react-dom-server.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/dongshx/Documents/study/my-project/bin/",
        "sourceFileName": "react-dom-server.js"
      }
    },
    "ast": null,
    "code": "const fs = require('fs');\n\nconst path = require('path'); // eslint-disable-next-line\n\n\nconst React = require('react'); // eslint-disable-next-line\n\n\nconst ReactDOMServer = require('react-dom/server');\n\nconst isPhone = require('../server/libs/is-phone');\n\nconst isDirectory = dir => {\n  let result = false;\n\n  try {\n    const stat = fs.statSync(dir);\n\n    if (stat && stat.isDirectory()) {\n      result = true;\n    }\n  } catch (err) {\n    console.error(`\"${dir}\" is not a directory!`);\n  }\n\n  return result;\n};\n\nfunction ReactDOMServerMiddleware(rel) {\n  return (ctx, next) => {\n    if (ctx.stream) return next();\n    let stream = '';\n    global.KoaPractice.device = !isPhone(ctx.request.header['user-agent']);\n\n    ctx.stream = async dir => {\n      const file = path.resolve(rel, dir);\n\n      try {\n        // Object.keys(require.cache).forEach(cachePath => {\n        //   if (/koa-practice\\/client\\//ig.test(cachePath)) {\n        //     // console.log(cachePath)\n        //     delete require.cache[cachePath]\n        //   }\n        // })\n        const filepath = isDirectory(file) ? `${file}/index.js` : `${file}.js`; // eslint-disable-next-line\n\n        const APP = require(filepath);\n\n        const element = React.createElement(APP);\n        stream = ReactDOMServer.renderToString(element);\n      } catch (error) {\n        console.error(error);\n      } // console.log(stream)\n\n\n      ctx.state.stream = stream;\n    };\n\n    return next();\n  };\n}\n\nmodule.exports = ReactDOMServerMiddleware;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlYWN0LWRvbS1zZXJ2ZXIuanMiXSwibmFtZXMiOlsiZnMiLCJyZXF1aXJlIiwicGF0aCIsIlJlYWN0IiwiUmVhY3RET01TZXJ2ZXIiLCJpc1Bob25lIiwiaXNEaXJlY3RvcnkiLCJkaXIiLCJyZXN1bHQiLCJzdGF0Iiwic3RhdFN5bmMiLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJSZWFjdERPTVNlcnZlck1pZGRsZXdhcmUiLCJyZWwiLCJjdHgiLCJuZXh0Iiwic3RyZWFtIiwiZ2xvYmFsIiwiS29hUHJhY3RpY2UiLCJkZXZpY2UiLCJyZXF1ZXN0IiwiaGVhZGVyIiwiZmlsZSIsInJlc29sdmUiLCJmaWxlcGF0aCIsIkFQUCIsImVsZW1lbnQiLCJjcmVhdGVFbGVtZW50IiwicmVuZGVyVG9TdHJpbmciLCJzdGF0ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLEVBQUUsR0FBR0MsT0FBTyxDQUFDLElBQUQsQ0FBbEI7O0FBQ0EsTUFBTUMsSUFBSSxHQUFHRCxPQUFPLENBQUMsTUFBRCxDQUFwQixDLENBQ0E7OztBQUNBLE1BQU1FLEtBQUssR0FBR0YsT0FBTyxDQUFDLE9BQUQsQ0FBckIsQyxDQUNBOzs7QUFDQSxNQUFNRyxjQUFjLEdBQUdILE9BQU8sQ0FBQyxrQkFBRCxDQUE5Qjs7QUFFQSxNQUFNSSxPQUFPLEdBQUdKLE9BQU8sQ0FBQyx5QkFBRCxDQUF2Qjs7QUFFQSxNQUFNSyxXQUFXLEdBQUlDLEdBQUQsSUFBUztBQUMzQixNQUFJQyxNQUFNLEdBQUcsS0FBYjs7QUFDQSxNQUFJO0FBQ0YsVUFBTUMsSUFBSSxHQUFHVCxFQUFFLENBQUNVLFFBQUgsQ0FBWUgsR0FBWixDQUFiOztBQUNBLFFBQUlFLElBQUksSUFBSUEsSUFBSSxDQUFDSCxXQUFMLEVBQVosRUFBZ0M7QUFDOUJFLE1BQUFBLE1BQU0sR0FBRyxJQUFUO0FBQ0Q7QUFDRixHQUxELENBS0UsT0FBT0csR0FBUCxFQUFZO0FBQ1pDLElBQUFBLE9BQU8sQ0FBQ0MsS0FBUixDQUFlLElBQUdOLEdBQUksdUJBQXRCO0FBQ0Q7O0FBQ0QsU0FBT0MsTUFBUDtBQUNELENBWEQ7O0FBYUEsU0FBU00sd0JBQVQsQ0FBa0NDLEdBQWxDLEVBQXVDO0FBQ3JDLFNBQU8sQ0FBQ0MsR0FBRCxFQUFNQyxJQUFOLEtBQWU7QUFDcEIsUUFBSUQsR0FBRyxDQUFDRSxNQUFSLEVBQWdCLE9BQU9ELElBQUksRUFBWDtBQUVoQixRQUFJQyxNQUFNLEdBQUcsRUFBYjtBQUVBQyxJQUFBQSxNQUFNLENBQUNDLFdBQVAsQ0FBbUJDLE1BQW5CLEdBQTRCLENBQUNoQixPQUFPLENBQUNXLEdBQUcsQ0FBQ00sT0FBSixDQUFZQyxNQUFaLENBQW1CLFlBQW5CLENBQUQsQ0FBcEM7O0FBRUFQLElBQUFBLEdBQUcsQ0FBQ0UsTUFBSixHQUFhLE1BQU9YLEdBQVAsSUFBZTtBQUMxQixZQUFNaUIsSUFBSSxHQUFHdEIsSUFBSSxDQUFDdUIsT0FBTCxDQUFhVixHQUFiLEVBQWtCUixHQUFsQixDQUFiOztBQUVBLFVBQUk7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQSxjQUFNbUIsUUFBUSxHQUFHcEIsV0FBVyxDQUFDa0IsSUFBRCxDQUFYLEdBQXFCLEdBQUVBLElBQUssV0FBNUIsR0FBMEMsR0FBRUEsSUFBSyxLQUFsRSxDQVJFLENBU0Y7O0FBQ0EsY0FBTUcsR0FBRyxHQUFHMUIsT0FBTyxDQUFDeUIsUUFBRCxDQUFuQjs7QUFDQSxjQUFNRSxPQUFPLEdBQUd6QixLQUFLLENBQUMwQixhQUFOLENBQW9CRixHQUFwQixDQUFoQjtBQUVBVCxRQUFBQSxNQUFNLEdBQUdkLGNBQWMsQ0FBQzBCLGNBQWYsQ0FBOEJGLE9BQTlCLENBQVQ7QUFDRCxPQWRELENBY0UsT0FBT2YsS0FBUCxFQUFjO0FBQ2RELFFBQUFBLE9BQU8sQ0FBQ0MsS0FBUixDQUFjQSxLQUFkO0FBQ0QsT0FuQnlCLENBb0IxQjs7O0FBRUFHLE1BQUFBLEdBQUcsQ0FBQ2UsS0FBSixDQUFVYixNQUFWLEdBQW1CQSxNQUFuQjtBQUNELEtBdkJEOztBQXlCQSxXQUFPRCxJQUFJLEVBQVg7QUFDRCxHQWpDRDtBQWtDRDs7QUFFRGUsTUFBTSxDQUFDQyxPQUFQLEdBQWlCbkIsd0JBQWpCIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9kb25nc2h4L0RvY3VtZW50cy9zdHVkeS9teS1wcm9qZWN0L2Jpbi8iLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJylcbmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJylcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbmNvbnN0IFJlYWN0RE9NU2VydmVyID0gcmVxdWlyZSgncmVhY3QtZG9tL3NlcnZlcicpXG5cbmNvbnN0IGlzUGhvbmUgPSByZXF1aXJlKCcuLi9zZXJ2ZXIvbGlicy9pcy1waG9uZScpXG5cbmNvbnN0IGlzRGlyZWN0b3J5ID0gKGRpcikgPT4ge1xuICBsZXQgcmVzdWx0ID0gZmFsc2VcbiAgdHJ5IHtcbiAgICBjb25zdCBzdGF0ID0gZnMuc3RhdFN5bmMoZGlyKVxuICAgIGlmIChzdGF0ICYmIHN0YXQuaXNEaXJlY3RvcnkoKSkge1xuICAgICAgcmVzdWx0ID0gdHJ1ZVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcihgXCIke2Rpcn1cIiBpcyBub3QgYSBkaXJlY3RvcnkhYClcbiAgfVxuICByZXR1cm4gcmVzdWx0XG59XG5cbmZ1bmN0aW9uIFJlYWN0RE9NU2VydmVyTWlkZGxld2FyZShyZWwpIHtcbiAgcmV0dXJuIChjdHgsIG5leHQpID0+IHtcbiAgICBpZiAoY3R4LnN0cmVhbSkgcmV0dXJuIG5leHQoKVxuXG4gICAgbGV0IHN0cmVhbSA9ICcnXG5cbiAgICBnbG9iYWwuS29hUHJhY3RpY2UuZGV2aWNlID0gIWlzUGhvbmUoY3R4LnJlcXVlc3QuaGVhZGVyWyd1c2VyLWFnZW50J10pXG5cbiAgICBjdHguc3RyZWFtID0gYXN5bmMgKGRpcikgPT4ge1xuICAgICAgY29uc3QgZmlsZSA9IHBhdGgucmVzb2x2ZShyZWwsIGRpcilcblxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gT2JqZWN0LmtleXMocmVxdWlyZS5jYWNoZSkuZm9yRWFjaChjYWNoZVBhdGggPT4ge1xuICAgICAgICAvLyAgIGlmICgva29hLXByYWN0aWNlXFwvY2xpZW50XFwvL2lnLnRlc3QoY2FjaGVQYXRoKSkge1xuICAgICAgICAvLyAgICAgLy8gY29uc29sZS5sb2coY2FjaGVQYXRoKVxuICAgICAgICAvLyAgICAgZGVsZXRlIHJlcXVpcmUuY2FjaGVbY2FjaGVQYXRoXVxuICAgICAgICAvLyAgIH1cbiAgICAgICAgLy8gfSlcblxuICAgICAgICBjb25zdCBmaWxlcGF0aCA9IGlzRGlyZWN0b3J5KGZpbGUpID8gYCR7ZmlsZX0vaW5kZXguanNgIDogYCR7ZmlsZX0uanNgXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgICBjb25zdCBBUFAgPSByZXF1aXJlKGZpbGVwYXRoKTtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQoQVBQKVxuXG4gICAgICAgIHN0cmVhbSA9IFJlYWN0RE9NU2VydmVyLnJlbmRlclRvU3RyaW5nKGVsZW1lbnQpXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKVxuICAgICAgfVxuICAgICAgLy8gY29uc29sZS5sb2coc3RyZWFtKVxuXG4gICAgICBjdHguc3RhdGUuc3RyZWFtID0gc3RyZWFtXG4gICAgfVxuXG4gICAgcmV0dXJuIG5leHQoKVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RET01TZXJ2ZXJNaWRkbGV3YXJlXG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "react-dom-server.js"
      ],
      "names": [
        "fs",
        "require",
        "path",
        "React",
        "ReactDOMServer",
        "isPhone",
        "isDirectory",
        "dir",
        "result",
        "stat",
        "statSync",
        "err",
        "console",
        "error",
        "ReactDOMServerMiddleware",
        "rel",
        "ctx",
        "next",
        "stream",
        "global",
        "KoaPractice",
        "device",
        "request",
        "header",
        "file",
        "resolve",
        "filepath",
        "APP",
        "element",
        "createElement",
        "renderToString",
        "state",
        "module",
        "exports"
      ],
      "mappings": "AAAA,MAAMA,EAAE,GAAGC,OAAO,CAAC,IAAD,CAAlB;;AACA,MAAMC,IAAI,GAAGD,OAAO,CAAC,MAAD,CAApB,C,CACA;;;AACA,MAAME,KAAK,GAAGF,OAAO,CAAC,OAAD,CAArB,C,CACA;;;AACA,MAAMG,cAAc,GAAGH,OAAO,CAAC,kBAAD,CAA9B;;AAEA,MAAMI,OAAO,GAAGJ,OAAO,CAAC,yBAAD,CAAvB;;AAEA,MAAMK,WAAW,GAAIC,GAAD,IAAS;AAC3B,MAAIC,MAAM,GAAG,KAAb;;AACA,MAAI;AACF,UAAMC,IAAI,GAAGT,EAAE,CAACU,QAAH,CAAYH,GAAZ,CAAb;;AACA,QAAIE,IAAI,IAAIA,IAAI,CAACH,WAAL,EAAZ,EAAgC;AAC9BE,MAAAA,MAAM,GAAG,IAAT;AACD;AACF,GALD,CAKE,OAAOG,GAAP,EAAY;AACZC,IAAAA,OAAO,CAACC,KAAR,CAAe,IAAGN,GAAI,uBAAtB;AACD;;AACD,SAAOC,MAAP;AACD,CAXD;;AAaA,SAASM,wBAAT,CAAkCC,GAAlC,EAAuC;AACrC,SAAO,CAACC,GAAD,EAAMC,IAAN,KAAe;AACpB,QAAID,GAAG,CAACE,MAAR,EAAgB,OAAOD,IAAI,EAAX;AAEhB,QAAIC,MAAM,GAAG,EAAb;AAEAC,IAAAA,MAAM,CAACC,WAAP,CAAmBC,MAAnB,GAA4B,CAAChB,OAAO,CAACW,GAAG,CAACM,OAAJ,CAAYC,MAAZ,CAAmB,YAAnB,CAAD,CAApC;;AAEAP,IAAAA,GAAG,CAACE,MAAJ,GAAa,MAAOX,GAAP,IAAe;AAC1B,YAAMiB,IAAI,GAAGtB,IAAI,CAACuB,OAAL,CAAaV,GAAb,EAAkBR,GAAlB,CAAb;;AAEA,UAAI;AACF;AACA;AACA;AACA;AACA;AACA;AAEA,cAAMmB,QAAQ,GAAGpB,WAAW,CAACkB,IAAD,CAAX,GAAqB,GAAEA,IAAK,WAA5B,GAA0C,GAAEA,IAAK,KAAlE,CARE,CASF;;AACA,cAAMG,GAAG,GAAG1B,OAAO,CAACyB,QAAD,CAAnB;;AACA,cAAME,OAAO,GAAGzB,KAAK,CAAC0B,aAAN,CAAoBF,GAApB,CAAhB;AAEAT,QAAAA,MAAM,GAAGd,cAAc,CAAC0B,cAAf,CAA8BF,OAA9B,CAAT;AACD,OAdD,CAcE,OAAOf,KAAP,EAAc;AACdD,QAAAA,OAAO,CAACC,KAAR,CAAcA,KAAd;AACD,OAnByB,CAoB1B;;;AAEAG,MAAAA,GAAG,CAACe,KAAJ,CAAUb,MAAV,GAAmBA,MAAnB;AACD,KAvBD;;AAyBA,WAAOD,IAAI,EAAX;AACD,GAjCD;AAkCD;;AAEDe,MAAM,CAACC,OAAP,GAAiBnB,wBAAjB",
      "sourceRoot": "/Users/dongshx/Documents/study/my-project/bin/",
      "sourcesContent": [
        "const fs = require('fs')\nconst path = require('path')\n// eslint-disable-next-line\nconst React = require('react')\n// eslint-disable-next-line\nconst ReactDOMServer = require('react-dom/server')\n\nconst isPhone = require('../server/libs/is-phone')\n\nconst isDirectory = (dir) => {\n  let result = false\n  try {\n    const stat = fs.statSync(dir)\n    if (stat && stat.isDirectory()) {\n      result = true\n    }\n  } catch (err) {\n    console.error(`\"${dir}\" is not a directory!`)\n  }\n  return result\n}\n\nfunction ReactDOMServerMiddleware(rel) {\n  return (ctx, next) => {\n    if (ctx.stream) return next()\n\n    let stream = ''\n\n    global.KoaPractice.device = !isPhone(ctx.request.header['user-agent'])\n\n    ctx.stream = async (dir) => {\n      const file = path.resolve(rel, dir)\n\n      try {\n        // Object.keys(require.cache).forEach(cachePath => {\n        //   if (/koa-practice\\/client\\//ig.test(cachePath)) {\n        //     // console.log(cachePath)\n        //     delete require.cache[cachePath]\n        //   }\n        // })\n\n        const filepath = isDirectory(file) ? `${file}/index.js` : `${file}.js`\n        // eslint-disable-next-line\n        const APP = require(filepath);\n        const element = React.createElement(APP)\n\n        stream = ReactDOMServer.renderToString(element)\n      } catch (error) {\n        console.error(error)\n      }\n      // console.log(stream)\n\n      ctx.state.stream = stream\n    }\n\n    return next()\n  }\n}\n\nmodule.exports = ReactDOMServerMiddleware\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1637920924341
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/dongshx/Documents/study/my-project/server/libs/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/dongshx/Documents/study/my-project\",\"filename\":\"/Users/dongshx/Documents/study/my-project/server/libs/is-phone.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/Users/dongshx/Documents/study/my-project\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.16.0:local": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/dongshx/Documents/study/my-project/server/libs/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/dongshx/Documents/study/my-project",
      "filename": "/Users/dongshx/Documents/study/my-project/server/libs/is-phone.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "local",
      "root": "/Users/dongshx/Documents/study/my-project",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/dongshx/Documents/study/my-project/server/libs/is-phone.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/dongshx/Documents/study/my-project/server/libs/is-phone.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/dongshx/Documents/study/my-project/server/libs/",
        "sourceFileName": "is-phone.js"
      }
    },
    "ast": null,
    "code": "module.exports = ua => /(iPhone|iPad|iPod|iOS|Android)/i.test(ua);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImlzLXBob25lLmpzIl0sIm5hbWVzIjpbIm1vZHVsZSIsImV4cG9ydHMiLCJ1YSIsInRlc3QiXSwibWFwcGluZ3MiOiJBQUFBQSxNQUFNLENBQUNDLE9BQVAsR0FBa0JDLEVBQUQsSUFBUSxrQ0FBa0NDLElBQWxDLENBQXVDRCxFQUF2QyxDQUF6QiIsInNvdXJjZVJvb3QiOiIvVXNlcnMvZG9uZ3NoeC9Eb2N1bWVudHMvc3R1ZHkvbXktcHJvamVjdC9zZXJ2ZXIvbGlicy8iLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9ICh1YSkgPT4gLyhpUGhvbmV8aVBhZHxpUG9kfGlPU3xBbmRyb2lkKS9pLnRlc3QodWEpXG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "is-phone.js"
      ],
      "names": [
        "module",
        "exports",
        "ua",
        "test"
      ],
      "mappings": "AAAAA,MAAM,CAACC,OAAP,GAAkBC,EAAD,IAAQ,kCAAkCC,IAAlC,CAAuCD,EAAvC,CAAzB",
      "sourceRoot": "/Users/dongshx/Documents/study/my-project/server/libs/",
      "sourcesContent": [
        "module.exports = (ua) => /(iPhone|iPad|iPod|iOS|Android)/i.test(ua)\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1637920959105
  }
}